<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <link href="../css/bootstrap.min.css"
          th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
    <style>
        .container {
            max-width: 560px;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="py-5 text-center">
        <h2>상품 등록 폼</h2>
    </div>
    <h4 class="mb-3">상품 입력</h4>
    <form action="item.html" th:action th:object="${item}" method="post">
        <!-- 아무것도 없이 action을 쓰게 되면 현재 url에 넘김 -->
        <!--        model.addAttribute("item", new Item());
                     (폼 밖에서는 영향을 주지 않음)폼에서 사용할 객체를 지정하는 행위-->
        <div>
            <label for="itemName">상품명</label>
            <input type="text" id="itemName" th:field="*{itemName}" class="form-control" placeholder="이름을 입력하세요">
            <!--          th:field="${item.itemName}" 이것도 가능하지만
              th:field="*{itemName}" 이라고 적어줘도 object="${item}"에서 자기는 item의 소속이라고 인정한다.

              렌더링할 때 th:field 가 자동으로 id="itemName" name="itemName" value="변수값" 를 만들어줌 -->
        </div>
        <div>
            <label for="price">가격</label>
            <input type="text" id="price" name="price" th:field="*{price}" class="form-control"
                   placeholder="가격을 입력하세요">
        </div>
        <div>
            <label for="quantity">수량</label>
            <input type="text" id="quantity" name="quantity" th:field="*{quantity}" class="form-control" placeholder="수량을 입력하세요">
        </div>
        <hr class="my-4">







        <div>
            <div class="form-check">
                <input type="checkbox" id="open" name="open" th:field="${item.open}" class="form-check-input">
<!--                <input type="hidden" name="_open" value="on"/>-->
<!--                th field를 적어주게 되면 히든태그는 필요가 없어짐.-->


<!--                체크 박스는 체크가 되어지지 않으면 값이 아예 안넘어감
                    프로젝트 구성상 에러가 발생할 수 있음.
                    그래서 네임값에 _open을 적어주면 체크가 안되어있으면 false를 넘기고
                    체크가 되어있으면 mvc자체에서 히든값을 무시해서 컨버터가 넘겨줌.

                    mvc자체의 트릭비슷한거임임
                   -->

                <lable for="open" class="form-check-label">판매 오픈</lable>

            </div>
        </div>






        <div>
            <div>등록 지역</div>
            <div th:each="region : ${regions}" class="form-check form-check-inline">
                <input type="checkbox" th:field="${item.regions}" th:value="${region.key}" class="form-check-input">
                <label th:for="${#ids.prev('regions')}"
                       th:text="${region.value}" class="form-check-label">서울</label>
<!--
                인풋의 경우 regions가 id값이 되는데 아이디는 유일해야하기 떄문에 regions1, regions2. ... 이런식으로
                each가 돌아갈때마다 id값이 생성이 된다.

                그러면 label은 id와 연결해야해서 id가 필요한데
                이는 ids라는 내장객체가 해결을 해준다. 'regions'

                이거또한 hidden태그를 넘겨서 false나 true를 반환함.
-->
            </div>
        </div>




        <div>
            <div>상품 종류</div>
            <div th:each="type : ${itemTypes}" class="form-check form-check-inline">
<!--                타임리프에서 enum 바로 접근하기
<div th:each="type : ${itemTypes}" class="form-check form-check-inline">
변경후
            each = ${T(hello.itemservice.domain.item.itemTypes).values()}
-->
                <input type="radio" th:field="*{itemType}" th:value="${type.name()}" class="form-check-input">
                <label th:for="${#ids.prev('itemType')}" th:text="${type.description}" class="form-check-label">BOOK</label>
            </div>
        </div>





        <div>
            <div>배송 방식</div>
            <select th:field="*{deliveryCode}" class="form-select">

                <option value="">==배송 방식 선택==</option>

                <option th:each="deliveryCode : ${deliveryCodes}" th:value="${deliveryCode.code}"
                        th:text="${deliveryCode.displayName}">FAST</option>
            </select>
        </div>





        <div class="row">
            <div class="col">
                <button class="w-100 btn btn-primary btn-lg" type="submit">상품
                    등록</button>
            </div>
            <div class="col">
                <button class="w-100 btn btn-secondary btn-lg"
                        onclick="location.href='items.html'"
                        th:onclick="|location.href='@{/basic/items}'|"
                        type="button">취소</button>
            </div>
        </div>
    </form>
</div> <!-- /container -->
</body>
</html>